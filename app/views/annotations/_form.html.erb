<%= hidden_field_tag(:annotation_type, template) %>

<% if defined?(id) %>
  <%= hidden_field_tag(:annotation_id, id) %>
<% end %>

<table class="annotation">
  <% annotation_template["parameters"].each do |parameter| %>
    <tr>
      <td><%= parameter["label"] -%></td>
      <% if values[parameter["symbol"]] %>
        <td>
          <%=h values[parameter["symbol"]] -%>
          <%= hidden_field_tag(parameter["symbol"], values[parameter["symbol"]]) -%>
        </td>
      <% else %>
        <% case parameter["type"] ; when "string" %>
          <td><%= text_field_tag(parameter["symbol"], values[parameter["symbol"]]) -%></td>
        <% when "textarea" %>
          <td><%= text_area_tag(parameter["symbol"], values[parameter["symbol"]]) -%></td>
        <% when "resource" %>
          <td><%= select_tag(parameter["symbol"], options_for_select(research_object.ore_resources.map { |r| [r[:name], r[:ore_path]] })) -%></td>
        <% end %>
      <% end %>
    </tr>
  <% end %>
</table>
